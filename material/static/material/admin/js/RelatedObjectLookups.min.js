!function(l){"use strict";function o(e){return e=(e=e.replace(/\./g,"__dot__")).replace(/\-/g,"__dash__")}function s(e){return e=(e=e.replace(/__dot__/g,".")).replace(/__dash__/g,"-")}function t(e,t,n){t=o(e.id.replace(t,"")),e=e.href;return n&&(-1===e.indexOf("?")?e+="?_popup=1":e+="&_popup=1"),window.open(e,t,"height=500,width=800,resizable=yes,scrollbars=yes").focus(),!1}function n(e){return t(e,/^lookup_/,!0)}function i(e){return t(e,/^(change|add|delete)_/,!1)}function a(e){var t,e=l(e),n=e.closest(".related-wrapper").find(".view-related, .change-related, .delete-related");n.length&&((t=e.val())?n.each(function(){var e=l(this);e.attr("href",e.attr("data-href-template").replace("__fk__",t))}):n.removeAttr("href"))}function e(e,t,n){var o,i,a,d=s(e.name),r=document.getElementById(d);r?("SELECT"===(o=r.nodeName.toUpperCase())?(r.options[r.options.length]=new Option(n,t,!0,!0),window.M&&window.M.FormSelect&&((i=M.FormSelect.getInstance(r))&&(a=i.options,i.destroy(),M.FormSelect.init(r,a)))):"INPUT"===o&&(-1!==r.className.indexOf("vManyToManyRawIdAdminField")&&r.value?r.value+=","+t:r.value=t),l(r).trigger("change")):(i=d+"_to",a=new Option(n,t),SelectBox.add_to_cache(i,a),SelectBox.redisplay(i)),e.close()}window.id_to_windowname=o,window.windowname_to_id=s,window.showRelatedObjectLookupPopup=n,window.dismissRelatedLookupPopup=function(e,t){var n=s(e.name),o=document.getElementById(n);-1!==o.className.indexOf("vManyToManyRawIdAdminField")&&o.value?o.value+=","+t:document.getElementById(n).value=t,(o=document.querySelector('label[for="'+n+'"]'))&&o.classList.add("active"),e.close()},window.showRelatedObjectPopup=i,window.updateRelatedObjectLinks=a,window.dismissAddRelatedObjectPopup=e,window.dismissChangeRelatedObjectPopup=function(e,t,n,o){var i=s(e.name).replace(/^edit_/,""),i=interpolate("#%s, #%s_from, #%s_to",[i,i,i]);(i=l(i)).find("option").each(function(){this.value===t&&(this.textContent=n,this.value=o)}),i.next().find(".select2-selection__rendered").each(function(){this.lastChild.textContent=n,this.title=n}),e.close()},window.dismissDeleteRelatedObjectPopup=function(e,t){var n=s(e.name).replace(/^delete_/,""),n=interpolate("#%s, #%s_from, #%s_to",[n,n,n]);l(n).find("option").each(function(){this.value===t&&l(this).remove()}).trigger("change"),e.close()},window.showAddAnotherPopup=i,window.dismissAddAnotherPopup=e,l(document).ready(function(){l("a[data-popup-opener]").on("click",function(e){e.preventDefault(),opener.dismissRelatedLookupPopup(window,l(this).data("popup-opener"))}),l("body").on("click",".related-widget-wrapper-link",function(e){e.preventDefault(),this.href&&(e=l.Event("django:show-related",{href:this.href}),l(this).trigger(e),e.isDefaultPrevented()||i(this))}),l("body").on("change",".related-wrapper select",function(e){var t=l.Event("django:update-related");l(this).trigger(t),t.isDefaultPrevented()||a(this)}),l(".related-wrapper select").trigger("change"),l("body").on("click",".related-lookup",function(e){e.preventDefault();e=l.Event("django:lookup-related");l(this).trigger(e),e.isDefaultPrevented()||n(this)})})}(django.jQuery);